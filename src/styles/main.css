body {
  font-size: 16px;
  margin: 0;
  overflow-x: hidden;
  padding: 0;
}

a {
  cursor: pointer;
}
/* identify links that take you to external sites */
a[href^="http://"],
a[href^="https://"] {
  /* borrowed from wikipedia.org */
  background-position: center right;
  background-repeat: no-repeat;
  background-image: url("../images/external-link-icon.png");
  background-image: linear-gradient(transparent,transparent),url("data:image/svg+xml,%3C%3Fxml version=%221.0%22 encoding=%22UTF-8%22 standalone=%22no%22%3F%3E%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2212%22 height=%2212%22%3E%3Cpath fill=%22%23fff%22 stroke=%22%2360686a%22 d=%22M1.5 4.518h5.982V10.5H1.5z%22/%3E%3Cpath d=%22M5.765 1H11v5.39L9.427 7.937l-1.31-1.31L5.393 9.35l-2.69-2.688 2.81-2.808L4.2 2.544z%22 fill=%22%2360686a%22/%3E%3Cpath d=%22M9.995 2.004l.022 4.885L8.2 5.07 5.32 7.95 4.09 6.723l2.882-2.88-1.85-1.852z%22 fill=%22%23fff%22/%3E%3C/svg%3E");
  background-image: -o-linear-gradient(transparent,transparent),url("../images/external-link-icon.png");
  padding-right: 13px;
}

/* angular temp top nav */
nav {
  /*background-color: #99aba9;*/
  background-color: #8f8d99;
  padding: 1rem;
  text-align: center;
}
nav a{
  color: #4d4d57;
  padding: 1rem;
}
nav a:hover {
  background: #abc;
}
nav a.current {
  background: #346;
  color: #dde;
  text-decoration: none;
}

.title-subtitle{
  border-bottom: 2px solid #e6d27a;
  z-index: -1;
}
.title-subtitle.floating {
  border-bottom: none;
  position: absolute;
  top: 5.4rem;
  left: 50%;
  text-shadow: 0 0 5px white;
  transform: translateX(-50%);
  width: 90%;
  z-index: 5;
}
header.no-border{
  border: none;
}
header h1 {
  color: #667;
  font-family: 'Playfair Display SC', Georgia, serif;
  font-size: 250%;
  letter-spacing: 0.15em;
  line-height: 3rem;
  margin: 0;
  padding: 0.4em 0 0;
  text-align: center;
}
header h2 {
  color: #667;
  font-family: Georgia, serif;
  font-size: 120%;
  line-height: 0.5rem;
  margin: 0 0 0.8em;
  padding: 1rem;
}
header {
  /*background-color: rgb(187, 205, 222);*/
  background-color: rgb(161, 166, 173);
  border-bottom: 4px solid #e6d27a;
  margin: 0px;
  padding: 0px;
}

button {
  display: inline-block;
  height: 50px;
  margin: 40px 0 40px 45vw;
  width: 200px;
}

footer {
  background-color: #8f8d99;
  display: block;
  margin-top: 40px;
  width: 100%;
}
footer ul {
  display: inline-block;
  margin-left: 8.3%;
  width: 30%;
}
footer ul li {
  background-color: #848484;
  list-style-type: none;
}
h2 {
  color: #6767a2;
  font-family: Arial, sans-serif;
  font-size: 20px;
  font-weight: 300;
  margin-top: 0;
  text-align: center;
}
a {
  color: #60686a;
}
.hidden {
  display: none;
}

.entrypoint {
  width: 100%;
  position: absolute;
  text-align: center;
}
.entrypoint a {
  background: rgba(230,235,240,0.8);
  border: solid 3px rgba(185,127,42,0.5);
  border-radius: 1px;
  box-shadow: 0 0 9px rgba(200,200,180,0.5);
  cursor: pointer;
  display: block;
  margin: 0 auto;
  padding: 1em 2em;
  transition: all 1.1s;
  max-width: 10em;
}
.entrypoint a:hover {
  background: rgba(241, 245, 249, 0.9);
  box-shadow: 0 0 45px rgb(255,255,255);
  border-color: rgba(185,127,42,0.7);
  transform: scale(1.02);
}
.aboveground .entrypoint {
  top: 50%;
}
.belowground .entrypoint {
  top: 60px;
}

/* landing page */

landing main {
  background: url('../images/patterns/regal.png') repeat; /* pattern by 'Akash' from subtlepatterns.com */
}

#upper-transition {
  position: relative;
}


/* front page proportional layout */

#frame {
  background: transparent url('/images/landing_full.jpg') no-repeat center top;
  background-size: contain;
  margin: 0 auto;
  /* height: 100vh; /* full height */
  /* max-width: 75vh; /* the image is a 3:4 ratio, so should never be wider than 3/4 of the height */
  height: 100%;
  width: 100%;
}
.aboveground,
.belowground {
  box-shadow: 0 0 5px black;
  margin: 0 auto;
  max-width: 75vh;
  position: relative;
  width: 100vw;
  /* width and height are 1:1 ratio
  ** and expand to the full width
  ** except when that would push .belowground down and offscreen
  ** ???
  */
}
.aboveground {
  max-height: 75vh;
  height: 100vw;
}
.belowground {
  overflow-y: scroll;
  padding: 0;
  max-width: 75vh;
  max-height: 25vh;
  height: 30vw; /* ~1:3 image ratio */
}

/* landing page animations */

#painting { /* 'noli me tangere' fades out... */
  background: transparent url('../images/miranda.jpg') no-repeat 50% top;
  background-size: contain;
  height: 90vh;
  left: 0px;
  position: absolute;
  top: 0px;
  margin-top: 5vh;
  transform-origin: 50% 50%; /*bottom;*/
  width: 100%;
  z-index: 6;
  animation-name: fadeOut;
  animation-delay: 1.2s;
  animation-duration: 1.6s;
  animation-timing-function: ease-in;
  animation-direction: normal;
  animation-fill-mode: both;
}
#frame { /* while the New England version fades in */
  animation-name: fadeIn;
  animation-delay: 1s;
  animation-duration: 1.2s;
  animation-timing-function: ease-in;
  animation-direction: normal;
  animation-fill-mode: backwards;
}
@keyframes fadeOut {
  0% { opacity: 1; }
  99% { opacity: 0; z-index: 4; transform: scale(0.6) translateY(1vh); }
  100% { opacity: 0; z-index: -1; }
  /*100% { opacity: 0; }*/
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.title-subtitle.floating {
  animation: 0.7s linear 3.2s backwards fadeIn;
}

.synopsis,
.entrypoint {
  animation: 0.5s linear 4.2s backwards fadeIn;
}

.episodes-wrapper {
  overflow-x: scroll;
}
.episodes {
  opacity: 0;
  transition: all 1s ease;
  width: 300vw;
}
.episodes.shown {
  opacity: 1;
}

.episode {
        /*border-image: url('../images/cloud.png') 2 stretch;*/
  background-color: rgb(215, 223, 231);
  border-color: rgb(185, 195, 206);
  border-style: solid;
  border-width: 1px;
  float: left;
  margin: 0 1em;
  padding: 0 20px;
  width: 22em;
  max-width: 100vw;
}


/* floating audio mini-player */

.episode-mini p {
  color: #555;
  font-family: sans-serif;
  font-size: 14px;
  margin: 0;
  padding: 0;
}
.episode-mini h5 {
  color: #555;
  margin: 0.6rem 0 0.4rem;
}
.episode-mini audio {
  width: 100%;
}

.episode-mini {
  /*display: none; /* initially hidden */
  background: #f0f0f0;
  border: solid 2px #dadada;
  border-radius: 4px;
  padding: 0 10px 5px;
  z-index: 20;
}
.episode-mini.shown {
  bottom: 1em;
  left: 0.5em;
  /* duration | timing-function | delay |
iteration-count | direction | fill-mode (forwards, backwards, both) | play-state | name */
  /* animate player move to lower left corner */
  /*animation: 1s ease-out 0.5s 1 normal both moveToCorner;*/
  /*transition: all 1s;*/
  /*position: fixed;*/
  /*min-width: 50vw;*/
  position: fixed;
  bottom: 10px;
  left: 10px;
}
.episode-mini.shown.centered { /* applied on front page */
  position: absolute;
  bottom: 50%;
  left: 50%;
  transform: translateX(-50%);
}
@keyframes moveToCorner {
  0% {
    position: absolute;
    bottom: 50%;
    left: 50%;
    /*transform: translateX(-50%); results in janky transition unfortunately */
  }
  95% {
    bottom: 10px;
    left: 10px;
    transform: none;
  }
  100% {
    position: fixed;
    /*bottom: 10px;
    left: 10px;*/
  }
}


#nolimetangere {
  background-color: #444;
  display: block;
  height: 360px;
  margin: 0 auto;
        /*width: 24em;*/
  opacity: 1;
}

.go-back-wrapper,
.page {
  margin: 0 16.7%;
  padding: 1rem 4rem;
  position: relative; /* to anchor .go-back */
}
.go-back-wrapper {
  top: 5rem; /* hack for positioning relative to <section>'s on episodes page */
}
.wrapper > section {
  position: relative;
}

.go-back {
  left: 0;
  position: absolute;
  top: -1.5em;
}
h3{
  border-bottom: 2px solid #a8afbd;
  color: #346;
  font-size: 1.8rem;
  line-height: 1.5em;
  margin: 10px 0;
  padding: 0;
}
img{
  display: block;
  margin: 0 auto;
}
.page{
  background-color: rgba(255, 255, 255, 0.64);
  border-bottom: 1px solid #ccc;
}
.animation-wrapper .page {
  margin-top: 3rem !important;
}
.animation-wrapper {
  /* for page-turn animation on child .wrapper */
  perspective: 800px;
  position: relative;
  min-height: 600px;
}
ng-component {
  /* for page-turn animation */
  position: absolute;
  top: 0;
  left: 0;
  transform-origin: left center;
  transform-style: preserve-3d;
  width: 100%; /* or less? */
}
ng-component, narrative, reference, characters, episodes, landing, .wrapper{
  background: url(../images/wavecut.png) repeat;
}
characters{
  min-height: 800px;
}
.wrapper{
  min-height: 800px;/*still working on this, trying to figure out how to get the content to be the right height to fill the rest of the page*/
  margin: 0;
  padding: 0;
}
episodes ul, narrative ul, reference ul, section ul{
  display: inline-block;
  list-style-type: none;
  margin: 0;
  padding: 2em;
  width: 66%;
}
li{
  line-height: 2em;
  padding: 10px 20px;
}
narrative, reference, episodes{
  display: block;
  height: 100%;
  width: 100%;
}
figure{
  margin: 3em auto;
}
figcaption {
  font-style: italic;
  font-size: 0.9em;
  line-height: 1.2em;
  text-align: center;
}
figure>img{
  background: #fff;
  box-shadow: 0 2px 4px #333;
  margin: 5px auto;
  padding: 10px;
}
p{
  color: #2f3135;
  font-size: 1.2em;
  line-height: 1.4em;
  /*margin: 2vh 2vw;*/
}
audio{
  width: 66%;
}
.blurb{
  display: inline-block;
  font-size: 1em;
  margin: 1% 0;
  vertical-align: top;
  width: 100%;
}
section{
  background-color: rgba(255, 255, 255, 0.64);
  border-bottom: 1px solid #ccc;
  margin: 70px 16.7%;
  padding: 30px;
  width: 66%;
}
hr{
  border-top: 1px solid #a8afbd;
  width: 41.3%;
}
.episode-thumbnail{
  display: inline-block;
  margin: 0 2%;
  vertical-align: top;
  width: 16.7%;
}
.supplemental{
  display: block;
  margin-top: 0;
  vertical-align: top;
  max-width: 175px;
}
.text-elements{
  display: inline-block;
  vertical-align: top;
  width: 75%;
}

.bottom-wrapper,
footer {
  border-top: 1px solid #73717b;
  min-height: 90px;
}
.left-links, .right-links{
  display: inline-block;
  width: 16.7%;
  margin: 10px 0 0 16.7%;
}
.left-links>a, .right-links>a{
  color: #4d4d57;
  display: block;
  margin-top: 5px;
}
.bottom-wrapper {
  margin: 0 auto;
        /*background: white;*/
  min-height: 5em;
  position: relative;
  padding-top: 130px;
}
.bottom-wrapper img {
  display: block;
  margin: 0 auto;
  position: relative;
}

#root-links {
  height: 100%;
  opacity: 0;
  position: absolute;
  top: 0;
  /*left: 50%;
  transform: translateX(-50%);*/
  width: 100%;
}
#root-links.open {
  opacity: 1;
}
#root-links ul {
  list-style-type: none;
  margin: 0 2em;
}
#root-links li {
  float: left;
  padding: 0; /* apply padding to <a> instead */
}
.synopsis,
#root-links a {
  background: #f3f0b3;
  border: solid 1px #aac;
  display: inline-block;
  font-style: italic;
  line-height: 1.4;
  padding: 0.4em 0.8em;
  text-decoration: none;
}

/* animate pop-in */
#root-links li {
  opacity: 0;
  transition-property: opacity;
  transition-duration: 0.8s;
  transition-timing-function: ease-out;
  /* transition-delay: set individually */
}
#root-links.open li {
  opacity: 1;
}

.synopsis {
  position: absolute;
  z-index: 5;
  left: 50%;
  bottom: 1em;
  transform: translateX(-50%);
}
.narrative-links,
.reference-links {
  clear: both;
  z-index: 5;
  /*transition: all 0.6s ease-out;*/
}

.narrative-links::before,
.reference-links::before {
    color: white;
    font-size: 80%;
    font-style: italic;
    position: relative;
    left: 3rem;
    top: 0.5rem;
}
.narrative-links::before {
  content: 'story sections';
}
.reference-links::before {
  content: 'reference sections';
}
.narrative-links {
  left: 0%;
}

/* two-column arrangement of root links */
@media (min-width: 450px) {
  .title-subtitle.floating {
    font-size: 100%;
  }
  #root-links li {
    float: none;
  }
  .narrative-links,
  .reference-links {
    top: 0;
    /*left: 40%;*/
    padding: 0;
    position: absolute;
  }
  .reference-links { left: 50%; }
  li { position: relative; margin-top: 1em; }
  .open .narrative-links  li:first-child { left: 10%; transition-delay: 200ms; }
  .open .narrative-links  li:nth-child(2) { left: 5%; transition-delay: 1200ms; }
  .open .narrative-links  li:nth-child(3) { left: 8%; transition-delay: 600ms; }

  .open .reference-links  li:first-child { left: 0%; transition-delay: 350ms; }
  .open .reference-links  li:nth-child(2) { left: 5%; transition-delay: 1000ms; }
  .open .reference-links  li:nth-child(3) { left: 1%; transition-delay: 800ms; }
  .open .reference-links  li:nth-child(4) { left: 6%; transition-delay: 830ms; }

}
@media (max-width: 650px){
  .narrative-links, .reference-links{
    display: inline-block;
    margin: 0;
    padding: 0;
    vertical-align: top;
    width: 45%;
  }
  #root-links ul{
    margin: 0;
  }
  .go-back{
    top: -2em;
  }
  section, .page{
    margin: 40px 0;
    padding: 8.3%;
    width: 83.3%;
  }
  .text-elements>audio{
    width: 100%;
  }
  nav>a{
    display: inline-block;
  }
  .wrapper{
    min-height: 400px;
  }
  main{
    height: 100vh;
    margin: auto 0;
  }
}
